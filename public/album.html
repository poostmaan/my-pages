<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>MyPages</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Custom styles for this template -->
    <link href="css/album.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>

  <body>
    <script>
      if (!sessionStorage.getItem("auth")) {
        location.href = "/signin.html";
      }
    </script>

    <button
      class="btn btn-purple position-fixed"
      style="bottom: 25px; right: 25px; z-index: 100"
      data-toggle="modal"
      data-target="#addPadeModal"
    >
      <i class="fas fa-plus"></i>
    </button>

    <main role="main">
      <div class="row mr-0">
        <div
          class="col-md-3 bg-dark p-0"
          style="height: 100vh"
        >
          <div class="position-fixed bg-dark" style="width: 25.2%; border-right: 1px solid #282b30; height: 100%;">
            <header class="shadow-lg" style="border-bottom: 1px solid #282b30">
              <div
                class="navbar navbar-dark sbox-shadow pb-4 text-white justify-content-center"
                id="u-navbar"
              >
                <i class="fa-regular fa-compass" style="font-size: 24px"></i
                ><span class="ml-2">My-pages</span>
              </div>
            </header>

            <div class="d-flex flex-column text-white">
              <ul class="border-top bg-success m-0">
                <li
                  class="nav-element d-flex justify-content-between pointer nav-link mt-1"
                >
                  <div>Sections</div>
                </li>
              </ul>
              <ul class="m-0" id="navbar"></ul>
              <hr />
            </div>
          </div>
        </div>

        <div class="col-md-9 bg-dark p-0">
          <header class="shadow-lg" style="border-bottom: 1px solid #282b30">
            <div class="navbar navbar-dark sbox-shadow pb-3" id="u-navbar">
              <div class="container d-flex justify-content-end">
                <div class="dropdown">
                  <a
                    href="#"
                    class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
                    id="dropdownUser1"
                    data-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <img
                      src="https://github.com/mdo.png"
                      alt=""
                      width="32"
                      height="32"
                      class="rounded-circle me-2"
                    />
                    <strong>Louis</strong>
                  </a>
                  <ul
                    class="dropdown-menu dropdown-menu-dark text-small shadow"
                    aria-labelledby="dropdownUser1"
                  >
                    <li><a class="dropdown-item" id="signout" href="#">Sign out</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </header>

          <div class="album py-5">
            <div class="container">
              <div>
                <label for="displayColumns" class="text-white" id="displayColumnsText"><i class="fa-solid fa-circle-info" title="Select the quantity of columns you want to see"></i> Columns: <span>4</span></label>
                <input type="range" class="form-range" min="2" max="6" name="displayColumns" id="displayColumns" value="4">
              </div>
              <div class="row" id="pages"></div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <div
      class="modal fade"
      id="addPadeModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="addPadeModalTitle"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addPadeModalTitle">Add new page</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div id="alerts-container"></div>
            <form method="POST" id="addPageForm" enctype="multipart/form-data">
              <input
                type="number"
                class="form-control rounded-0 border-top-0 border-right-0 border-left-0 mb-3"
                name="rating"
                id="rating"
                value="4"
              />
              <input
                type="text"
                class="form-control rounded-0 border-top-0 border-right-0 border-left-0 mb-3"
                name="url"
                id="url"
                placeholder="Type a url"
                maxlength="80"
                required
              />
              <input
                type="text"
                class="form-control rounded-0 border-top-0 border-right-0 border-left-0 mb-3"
                name="description"
                id="description"
                placeholder="Type a description"
                maxlength="60"
                required
              />

              <!-- <input type="text" list="section" class="form-control rounded-0 border-top-0 border-right-0 border-left-0 mb-3"/> -->
              <select
                name="section"
                id="section"
                class="form-control rounded-0 border-top-0 border-right-0 border-left-0 mb-3"
                required
              >
                <option value="Miscellaneous" selected>Miscellaneous</option>
                <option value="Programming">Programming</option>
                <option value="XXX">XXX</option>
              </select>

              <input
                type="file"
                class="form-control rounded-0 border-top-0 border-right-0 border-left-0 mb-3"
                name="image"
                id="imagen"
                required
              />

              <input type="submit" value="SAVE" class="btn btn-primary" />
            </form>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="errorModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="errorModal"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content"></div>
      </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script>
      window.jQuery ||
        document.write(
          '<script src="assets/js/vendor/jquery-slim.min.js"><\/script>'
        );
    </script>
    <script src="assets/js/vendor/popper.min.js"></script>
    <script src="dist/js/bootstrap.min.js"></script>
    <script src="assets/js/vendor/holder.min.js"></script>

    <script src="js/helpers/displayErrors.js"></script>
    <script src="js/classes/Storage.js"></script>
    <script src="js/classes/Html.js"></script>
    <script src="js/classes/Pages.js"></script>
    <script src="js/classes/Section.js"></script>
    <script src="js/apis/pagesApis.js"></script>
    <script src="js/handleFilter.js"></script>
    <script src="js/handleForm.js"></script>
    <script src="js/index.js"></script>
    <script>
      var otherElement = document.getElementById("u-navbar");
      var otherElementHeight = otherElement.offsetHeight;

      // Aplicar la altura obtenida en CSS como una variable personalizada
      document.documentElement.style.setProperty(
        "--header-message",
        otherElementHeight + "px"
      );

      document.getElementById('signout').addEventListener('click', () => {
        sessionStorage.clear();
        location.href = '/signin.html';
      })

      const displayColumns = document.getElementById('displayColumns');
      const displayColumnsText = document.querySelector('#displayColumnsText > span');

      let previousValue = 4

      displayColumns.addEventListener('change', function() {
        displayColumnsText.textContent = this.value

        $('.page-card').removeClass(`col-md-${previousValue}`)

        $('.page-card').addClass(`col-md-${ this.value }`)

        previousValue = this.value
      })
    </script>
  </body>
</html>
